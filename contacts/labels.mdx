---
title: 'Contact Labels'
description: 'Organize and categorize your WhatsApp contacts with customizable labels for better segmentation and targeting'
icon: 'tags'
---

# Contact Labels

The Contact Labels API allows you to organize, categorize, and segment your WhatsApp contacts using customizable labels. Create labels with custom colors, assign them to contacts, and use them for targeted messaging and campaign segmentation.

## Overview

Contact label features include:

- **Custom Labels**: Create labeled categories with custom names, colors, and descriptions
- **Label Assignment**: Assign multiple labels to contacts for flexible categorization
- **Smart Filtering**: Filter contacts by labels for targeted messaging
- **Color Coding**: Visual organization with customizable hex colors
- **Bulk Operations**: Assign or remove labels from multiple contacts simultaneously
- **Analytics**: Track label usage and contact distribution

## Create Label

Create a new contact label with custom properties:

<CodeGroup>

```bash cURL
curl -X POST "https://api.megasend.co.il/contact-labels" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "instance_id": "550e8400-e29b-41d4-a716-446655440000",
    "name": "VIP Customer",
    "color_hex": "#FF5733",
    "description": "High-value customers with premium subscriptions"
  }'
```

```javascript JavaScript
const newLabel = {
  instance_id: '550e8400-e29b-41d4-a716-446655440000',
  name: 'VIP Customer',
  color_hex: '#FF5733',
  description: 'High-value customers with premium subscriptions'
};

const response = await fetch('https://api.megasend.co.il/contact-labels', {
  method: 'POST',
  headers: {
    'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(newLabel)
});

const label = await response.json();
```

```python Python
import requests

new_label = {
    'instance_id': '550e8400-e29b-41d4-a716-446655440000',
    'name': 'VIP Customer',
    'color_hex': '#FF5733',
    'description': 'High-value customers with premium subscriptions'
}

response = requests.post(
    'https://api.megasend.co.il/contact-labels',
    headers={'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'},
    json=new_label
)

label = response.json()
```

</CodeGroup>

### Response

```json
{
  "id": "660f9511-f3ac-52e5-b827-557766551111",
  "instance_id": "550e8400-e29b-41d4-a716-446655440000",
  "user_id": "770a0622-a4bd-63f6-c938-668877662222",
  "name": "VIP Customer",
  "color_hex": "#FF5733",
  "description": "High-value customers with premium subscriptions",
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
}
```

## List Labels

Retrieve all contact labels for your instance:

<CodeGroup>

```bash cURL
curl -X GET "https://api.megasend.co.il/contact-labels?instance_id=550e8400-e29b-41d4-a716-446655440000" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN"
```

```javascript JavaScript
const response = await fetch('https://api.megasend.co.il/contact-labels?instance_id=550e8400-e29b-41d4-a716-446655440000', {
  headers: {
    'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'
  }
});

const labels = await response.json();
```

```python Python
response = requests.get(
    'https://api.megasend.co.il/contact-labels?instance_id=550e8400-e29b-41d4-a716-446655440000',
    headers={'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'}
)

labels = response.json()
```

</CodeGroup>

### Query Parameters

- `instance_id` - WhatsApp instance ID (required)
- `page` - Page number (default: 1)
- `per_page` - Number of labels per page (default: 10, max: 100)
- `search` - Search labels by name
- `include_usage` - Include usage statistics for each label

### Response

```json
{
  "items": [
    {
      "id": "660f9511-f3ac-52e5-b827-557766551111",
      "name": "VIP Customer",
      "color_hex": "#FF5733",
      "description": "High-value customers with premium subscriptions",
      "usage_count": 25,
      "created_at": "2024-01-15T10:30:00Z"
    },
    {
      "id": "770a0622-a4bd-63f6-c938-668877662222",
      "name": "Lead",
      "color_hex": "#33A1FF",
      "description": "Potential customers in sales pipeline",
      "usage_count": 48,
      "created_at": "2024-01-14T09:15:00Z"
    }
  ],
  "total": 2,
  "page": 1,
  "per_page": 10,
  "pages": 1
}
```

## Assign Label to Contact

Assign a label to a specific contact:

<CodeGroup>

```bash cURL
curl -X POST "https://api.megasend.co.il/contact-labels/assignments" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "instance_id": "550e8400-e29b-41d4-a716-446655440000",
    "contact_id": "+1234567890",
    "label_id": "660f9511-f3ac-52e5-b827-557766551111"
  }'
```

```javascript JavaScript
const assignment = {
  instance_id: '550e8400-e29b-41d4-a716-446655440000',
  contact_id: '+1234567890',
  label_id: '660f9511-f3ac-52e5-b827-557766551111'
};

const response = await fetch('https://api.megasend.co.il/contact-labels/assignments', {
  method: 'POST',
  headers: {
    'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(assignment)
});

const result = await response.json();
```

```python Python
assignment = {
    'instance_id': '550e8400-e29b-41d4-a716-446655440000',
    'contact_id': '+1234567890',
    'label_id': '660f9511-f3ac-52e5-b827-557766551111'
}

response = requests.post(
    'https://api.megasend.co.il/contact-labels/assignments',
    headers={'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'},
    json=assignment
)

result = response.json()
```

</CodeGroup>

### Response

```json
{
  "message": "Label assigned successfully",
  "data": {
    "instance_id": "550e8400-e29b-41d4-a716-446655440000",
    "contact_id": "+1234567890",
    "label_id": "660f9511-f3ac-52e5-b827-557766551111",
    "created_at": "2024-01-15T10:30:00Z"
  }
}
```

## Remove Label from Contact

Remove a label assignment from a contact:

<CodeGroup>

```bash cURL
curl -X DELETE "https://api.megasend.co.il/contact-labels/assignments" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "instance_id": "550e8400-e29b-41d4-a716-446655440000",
    "contact_id": "+1234567890",
    "label_id": "660f9511-f3ac-52e5-b827-557766551111"
  }'
```

```javascript JavaScript
const removal = {
  instance_id: '550e8400-e29b-41d4-a716-446655440000',
  contact_id: '+1234567890',
  label_id: '660f9511-f3ac-52e5-b827-557766551111'
};

const response = await fetch('https://api.megasend.co.il/contact-labels/assignments', {
  method: 'DELETE',
  headers: {
    'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(removal)
});

const result = await response.json();
```

```python Python
removal = {
    'instance_id': '550e8400-e29b-41d4-a716-446655440000',
    'contact_id': '+1234567890',
    'label_id': '660f9511-f3ac-52e5-b827-557766551111'
}

response = requests.delete(
    'https://api.megasend.co.il/contact-labels/assignments',
    headers={'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'},
    json=removal
)

result = response.json()
```

</CodeGroup>

## Filter Contacts by Labels

Retrieve contacts filtered by specific labels:

<CodeGroup>

```bash cURL
curl -X GET "https://api.megasend.co.il/contacts?instance_id=550e8400-e29b-41d4-a716-446655440000&label_id=660f9511-f3ac-52e5-b827-557766551111" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN"
```

```javascript JavaScript
const response = await fetch('https://api.megasend.co.il/contacts?instance_id=550e8400-e29b-41d4-a716-446655440000&label_id=660f9511-f3ac-52e5-b827-557766551111', {
  headers: {
    'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'
  }
});

const contacts = await response.json();
```

```python Python
response = requests.get(
    'https://api.megasend.co.il/contacts?instance_id=550e8400-e29b-41d4-a716-446655440000&label_id=660f9511-f3ac-52e5-b827-557766551111',
    headers={'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'}
)

contacts = response.json()
```

</CodeGroup>

### Advanced Filtering

You can also filter contacts using additional parameters:

- `label_id` - Filter by specific label ID
- `unlabeled_only=true` - Get contacts with no labels assigned
- `date_from` - Filter contacts created after date (YYYY-MM-DD)
- `date_to` - Filter contacts created before date (YYYY-MM-DD)
- `active_only=true` - Only return active contacts

### Response

```json
{
  "items": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "phone_number": "+1234567890",
      "name": "John Doe",
      "email": "john@example.com",
      "labels": [
        {
          "id": "660f9511-f3ac-52e5-b827-557766551111",
          "name": "VIP Customer",
          "color_hex": "#FF5733",
          "description": "High-value customers with premium subscriptions"
        }
      ],
      "created_at": "2024-01-15T10:30:00Z",
      "updated_at": "2024-01-15T10:30:00Z"
    }
  ],
  "total": 25,
  "page": 1,
  "per_page": 20,
  "pages": 2
}
```

## Get Contact Labels

Retrieve all labels assigned to a specific contact:

<CodeGroup>

```bash cURL
curl -X GET "https://api.megasend.co.il/contact-labels/contacts/550e8400-e29b-41d4-a716-446655440000/labels" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN"
```

```javascript JavaScript
const response = await fetch('https://api.megasend.co.il/contact-labels/contacts/550e8400-e29b-41d4-a716-446655440000/labels', {
  headers: {
    'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'
  }
});

const contactLabels = await response.json();
```

```python Python
response = requests.get(
    'https://api.megasend.co.il/contact-labels/contacts/550e8400-e29b-41d4-a716-446655440000/labels',
    headers={'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'}
)

contact_labels = response.json()
```

</CodeGroup>

### Response

```json
{
  "contact_id": "550e8400-e29b-41d4-a716-446655440000",
  "labels": [
    {
      "id": "660f9511-f3ac-52e5-b827-557766551111",
      "name": "VIP Customer",
      "color_hex": "#FF5733",
      "description": "High-value customers with premium subscriptions",
      "created_at": "2024-01-15T10:30:00Z"
    },
    {
      "id": "770a0622-a4bd-63f6-c938-668877662222",
      "name": "Newsletter Subscriber",
      "color_hex": "#28A745",
      "description": "Subscribed to marketing newsletter",
      "created_at": "2024-01-14T09:15:00Z"
    }
  ]
}
```

## Update Label

Modify label properties like name, color, or description:

<CodeGroup>

```bash cURL
curl -X PUT "https://api.megasend.co.il/contact-labels/660f9511-f3ac-52e5-b827-557766551111" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Premium Customer",
    "color_hex": "#DC3545",
    "description": "Premium tier customers with enhanced benefits"
  }'
```

```javascript JavaScript
const updates = {
  name: 'Premium Customer',
  color_hex: '#DC3545',
  description: 'Premium tier customers with enhanced benefits'
};

const response = await fetch('https://api.megasend.co.il/contact-labels/660f9511-f3ac-52e5-b827-557766551111', {
  method: 'PUT',
  headers: {
    'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(updates)
});

const label = await response.json();
```

```python Python
updates = {
    'name': 'Premium Customer',
    'color_hex': '#DC3545',
    'description': 'Premium tier customers with enhanced benefits'
}

response = requests.put(
    'https://api.megasend.co.il/contact-labels/660f9511-f3ac-52e5-b827-557766551111',
    headers={'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'},
    json=updates
)

label = response.json()
```

</CodeGroup>

## Delete Label

Remove a label and all its assignments:

<CodeGroup>

```bash cURL
curl -X DELETE "https://api.megasend.co.il/contact-labels/660f9511-f3ac-52e5-b827-557766551111" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN"
```

```javascript JavaScript
const response = await fetch('https://api.megasend.co.il/contact-labels/660f9511-f3ac-52e5-b827-557766551111', {
  method: 'DELETE',
  headers: {
    'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'
  }
});

const result = await response.json();
```

```python Python
response = requests.delete(
    'https://api.megasend.co.il/contact-labels/660f9511-f3ac-52e5-b827-557766551111',
    headers={'X-MEGASEND-AUTH': 'YOUR_ACCESS_TOKEN'}
)

result = response.json()
```

</CodeGroup>

## Implementation Examples

### Label Management Class

```javascript
class ContactLabelManager {
  constructor(apiToken) {
    this.apiToken = apiToken;
    this.baseUrl = 'https://api.megasend.co.il';
  }

  async createLabel(instanceId, labelData) {
    const response = await fetch(`${this.baseUrl}/contact-labels`, {
      method: 'POST',
      headers: {
        'X-MEGASEND-AUTH': this.apiToken,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        instance_id: instanceId,
        ...labelData
      })
    });

    return response.json();
  }

  async assignLabelToContact(instanceId, contactId, labelId) {
    const response = await fetch(`${this.baseUrl}/contact-labels/assignments`, {
      method: 'POST',
      headers: {
        'X-MEGASEND-AUTH': this.apiToken,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        instance_id: instanceId,
        contact_id: contactId,
        label_id: labelId
      })
    });

    return response.json();
  }

  async getContactsByLabel(instanceId, labelId, options = {}) {
    const params = new URLSearchParams({
      instance_id: instanceId,
      label_id: labelId,
      ...options
    });

    const response = await fetch(`${this.baseUrl}/contacts?${params}`, {
      headers: {
        'X-MEGASEND-AUTH': this.apiToken
      }
    });

    return response.json();
  }

  async bulkAssignLabels(instanceId, contactIds, labelIds) {
    const assignments = [];

    for (const contactId of contactIds) {
      for (const labelId of labelIds) {
        try {
          await this.assignLabelToContact(instanceId, contactId, labelId);
          assignments.push({ contactId, labelId, status: 'success' });
        } catch (error) {
          assignments.push({ contactId, labelId, status: 'error', error: error.message });
        }
      }
    }

    return assignments;
  }

  async getUnlabeledContacts(instanceId) {
    const params = new URLSearchParams({
      instance_id: instanceId,
      unlabeled_only: 'true'
    });

    const response = await fetch(`${this.baseUrl}/contacts?${params}`, {
      headers: {
        'X-MEGASEND-AUTH': this.apiToken
      }
    });

    return response.json();
  }
}

// Usage example
const labelManager = new ContactLabelManager('your-api-token');

// Create customer segment labels
const vipLabel = await labelManager.createLabel('instance-id', {
  name: 'VIP Customer',
  color_hex: '#FF5733',
  description: 'High-value customers'
});

const leadLabel = await labelManager.createLabel('instance-id', {
  name: 'Hot Lead',
  color_hex: '#28A745',
  description: 'Qualified leads ready for conversion'
});

// Assign labels to contacts
await labelManager.assignLabelToContact('instance-id', '+1234567890', vipLabel.id);
await labelManager.assignLabelToContact('instance-id', '+1987654321', leadLabel.id);

// Get all VIP customers for targeted campaign
const vipCustomers = await labelManager.getContactsByLabel('instance-id', vipLabel.id);
console.log(`Found ${vipCustomers.total} VIP customers`);
```

### Campaign Targeting with Labels

```javascript
class LabelBasedCampaigns {
  constructor(apiToken) {
    this.apiToken = apiToken;
    this.baseUrl = 'https://api.megasend.co.il';
    this.labelManager = new ContactLabelManager(apiToken);
  }

  async createSegmentedCampaign(instanceId, labelIds, messageTemplate) {
    const campaignResults = [];

    for (const labelId of labelIds) {
      // Get contacts for this label
      const contacts = await this.labelManager.getContactsByLabel(instanceId, labelId);

      // Send messages to all contacts in this segment
      for (const contact of contacts.items) {
        try {
          const result = await this.sendMessage(contact.phone_number, messageTemplate);
          campaignResults.push({
            contact: contact.phone_number,
            labelId: labelId,
            status: 'sent',
            messageId: result.id
          });
        } catch (error) {
          campaignResults.push({
            contact: contact.phone_number,
            labelId: labelId,
            status: 'failed',
            error: error.message
          });
        }
      }
    }

    return {
      total_sent: campaignResults.filter(r => r.status === 'sent').length,
      total_failed: campaignResults.filter(r => r.status === 'failed').length,
      results: campaignResults
    };
  }

  async sendMessage(phoneNumber, template) {
    const response = await fetch(`${this.baseUrl}/messages/send`, {
      method: 'POST',
      headers: {
        'X-MEGASEND-AUTH': this.apiToken,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        to: phoneNumber,
        ...template
      })
    });

    return response.json();
  }

  async autoLabelNewContacts(instanceId, rules) {
    // Get unlabeled contacts
    const unlabeled = await this.labelManager.getUnlabeledContacts(instanceId);

    for (const contact of unlabeled.items) {
      for (const rule of rules) {
        if (this.matchesRule(contact, rule.criteria)) {
          await this.labelManager.assignLabelToContact(
            instanceId,
            contact.id,
            rule.labelId
          );
          console.log(`Auto-labeled ${contact.phone_number} with ${rule.labelName}`);
        }
      }
    }
  }

  matchesRule(contact, criteria) {
    // Example rule matching logic
    if (criteria.customField && contact.custom_fields) {
      return contact.custom_fields[criteria.customField] === criteria.value;
    }

    if (criteria.tags && contact.tags) {
      return criteria.tags.some(tag => contact.tags.includes(tag));
    }

    return false;
  }
}

// Usage example
const campaigns = new LabelBasedCampaigns('your-api-token');

// Set up auto-labeling rules
const rules = [
  {
    labelId: 'vip-label-id',
    labelName: 'VIP Customer',
    criteria: { customField: 'customer_tier', value: 'premium' }
  },
  {
    labelId: 'lead-label-id',
    labelName: 'Hot Lead',
    criteria: { tags: ['inquiry', 'demo_requested'] }
  }
];

// Auto-label new contacts
await campaigns.autoLabelNewContacts('instance-id', rules);

// Send targeted campaign to VIP customers and hot leads
const results = await campaigns.createSegmentedCampaign(
  'instance-id',
  ['vip-label-id', 'lead-label-id'],
  {
    type: 'text',
    message: 'Special offer just for you! Get 20% off your next order.'
  }
);

console.log(`Campaign sent to ${results.total_sent} contacts`);
```

## Best Practices

### Label Organization

1. **Consistent Naming** - Use clear, descriptive label names (e.g., "VIP Customer", "Newsletter Subscriber")
2. **Color Coordination** - Use consistent color schemes for related label categories
3. **Hierarchical Structure** - Consider using prefixes for label categories (e.g., "Customer-VIP", "Lead-Hot")
4. **Regular Cleanup** - Remove unused labels and consolidate similar ones periodically

### Segmentation Strategy

1. **Behavioral Labels** - Create labels based on customer actions (purchased, viewed_product, support_contact)
2. **Demographic Labels** - Segment by customer attributes (location, age_group, company_size)
3. **Engagement Labels** - Track engagement levels (active, inactive, highly_engaged)
4. **Lifecycle Labels** - Mark customer journey stages (prospect, customer, churned, win_back)

### Performance Optimization

1. **Label Indexing** - Use labels strategically for frequently filtered segments
2. **Bulk Operations** - Use bulk assignment for large contact groups
3. **Pagination** - Always paginate when retrieving large contact lists
4. **Caching** - Cache label definitions and contact assignments locally

## Error Handling

Common contact label errors and solutions:

```javascript
async function handleLabelErrors(response) {
  if (!response.ok) {
    const error = await response.json();

    switch (response.status) {
      case 400:
        if (error.detail.includes('color_hex')) {
          throw new Error('Invalid color format. Use 6-digit hex format (#FF5733)');
        }
        if (error.detail.includes('name')) {
          throw new Error('Label name must be 1-100 characters with valid characters only');
        }
        break;
      case 409:
        throw new Error('Label with this name already exists for this instance');
      case 404:
        if (error.detail.includes('label')) {
          throw new Error('Label not found or you do not have permission to access it');
        }
        if (error.detail.includes('contact')) {
          throw new Error('Contact not found');
        }
        break;
      case 422:
        throw new Error(`Validation error: ${error.detail}`);
      default:
        throw new Error(`Unexpected error: ${error.detail}`);
    }
  }

  return await response.json();
}
```

## Next Steps

- [Filter contacts by labels](/contacts/manage#contact-search--filtering) for targeted messaging
- [Create campaigns](/campaigns/create) using label-based segmentation
- [Set up automation flows](/flows/create) triggered by label assignments
- [Monitor analytics](/analytics/overview) to track label-based engagement metrics