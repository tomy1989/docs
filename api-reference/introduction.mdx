---
title: 'API Reference'
description: 'Complete reference for the MegaSend WhatsApp Business API with endpoints, parameters, and response formats'
icon: 'code'
---

The MegaSend API is organized around REST principles. Our API accepts JSON-encoded request bodies, returns JSON-encoded responses, and uses standard HTTP response codes, authentication, and verbs.

## Base URL

All API requests should be made to:

```
https://api.megasend.co.il
```

## Authentication

The MegaSend API uses X-MEGASEND-AUTH header authentication. Include your access token in the X-MEGASEND-AUTH header:

```bash
X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN
```

You can obtain your API token from the [MegaSend Dashboard](https://app.megasend.co.il).

## Request Format

### Content Type

All POST and PUT requests must include the `Content-Type: application/json` header:

```bash
curl -X POST "https://api.megasend.co.il/messages/send" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"instance_id": "...", "recipient": "..."}'
```

### HTTP Methods

The API uses standard HTTP methods:

- **GET** - Retrieve data
- **POST** - Create new resources
- **PUT** - Update existing resources
- **DELETE** - Remove resources

## Response Format

### Success Responses

Successful API calls return JSON with the requested data:

```json
{
  "id": "msg_abc123def456",
  "status": "sent",
  "recipient": "+1234567890",
  "message_type": "text",
  "created_at": "2024-01-15T10:30:00Z"
}
```

### Error Responses

Error responses include an error object with details:

```json
{
  "error": {
    "code": "INVALID_PHONE_NUMBER",
    "message": "The recipient phone number is not valid",
    "details": "Phone number must be in international format (+1234567890)",
    "request_id": "req_xyz789abc123"
  }
}
```

## HTTP Status Codes

The API uses conventional HTTP status codes:

| Code | Status | Description |
|------|--------|-------------|
| 200 | OK | Request successful |
| 201 | Created | Resource created successfully |
| 400 | Bad Request | Invalid request parameters |
| 401 | Unauthorized | Invalid or missing authentication |
| 403 | Forbidden | Insufficient permissions |
| 404 | Not Found | Resource not found |
| 422 | Unprocessable Entity | Validation errors |
| 429 | Too Many Requests | Rate limit exceeded |
| 500 | Internal Server Error | Server error |

## Error Codes

### Common Error Codes

| Code | Description |
|------|-------------|
| `INVALID_TOKEN` | Authentication token is invalid |
| `EXPIRED_TOKEN` | Authentication token has expired |
| `INSUFFICIENT_PERMISSIONS` | Token lacks required permissions |
| `INVALID_INSTANCE` | Instance ID is invalid or not found |
| `INSTANCE_DISCONNECTED` | WhatsApp instance is not connected |
| `INVALID_PHONE_NUMBER` | Phone number format is invalid |
| `MESSAGE_TOO_LONG` | Message exceeds length limits |
| `RATE_LIMIT_EXCEEDED` | API rate limit exceeded |
| `TEMPLATE_NOT_FOUND` | Message template not found |
| `TEMPLATE_NOT_APPROVED` | Template not approved by WhatsApp |

## Pagination

List endpoints support pagination using cursor-based pagination:

### Request Parameters

- `limit` (optional) - Number of items to return (default: 20, max: 100)
- `cursor` (optional) - Pagination cursor from previous response

### Response Format

```json
{
  "data": [
    {
      "id": "msg_1",
      "status": "delivered"
    },
    {
      "id": "msg_2", 
      "status": "sent"
    }
  ],
  "pagination": {
    "has_more": true,
    "next_cursor": "eyJpZCI6Im1zZ18yIiwiZGlyZWN0aW9uIjoibmV4dCJ9"
  }
}
```

### Example Usage

```bash
# First page
curl "https://api.megasend.co.il/messages?limit=20" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN"

# Next page
curl "https://api.megasend.co.il/messages?limit=20&cursor=eyJpZCI6Im1zZ18yIiwiZGlyZWN0aW9uIjoibmV4dCJ9" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN"
```

## Rate Limiting

The API implements rate limiting to ensure fair usage:

### Limits

- **Global**: 1,000 requests per minute per API key
- **Messaging**: Instance-specific limits based on WhatsApp Business tier
- **Bulk Operations**: 10 concurrent bulk jobs per account

### Headers

Rate limit information is included in response headers:

```http
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 847
X-RateLimit-Reset: 1705320900
```

### Handling Rate Limits

When rate limited (429 status), implement exponential backoff:

```javascript
async function makeRequestWithRetry(url, options, maxRetries = 3) {
  for (let attempt = 0; attempt <= maxRetries; attempt++) {
    try {
      const response = await fetch(url, options);
      
      if (response.status === 429) {
        const retryAfter = response.headers.get('Retry-After') || Math.pow(2, attempt);
        await new Promise(resolve => setTimeout(resolve, retryAfter * 1000));
        continue;
      }
      
      return response;
    } catch (error) {
      if (attempt === maxRetries) throw error;
      await new Promise(resolve => setTimeout(resolve, Math.pow(2, attempt) * 1000));
    }
  }
}
```

## Idempotency

For POST requests that create resources, you can include an idempotency key to prevent duplicate requests:

```bash
curl -X POST "https://api.megasend.co.il/messages/send" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -H "Idempotency-Key: msg_unique_key_123" \
  -d '{"instance_id": "...", "recipient": "..."}'
```

## Webhooks

The API supports webhooks for real-time event notifications. See [Webhook Setup](/webhooks/setup) for configuration details.

## Data Types

### Common Field Types

- **ID Fields** - UUID format: `550e8400-e29b-41d4-a716-446655440000`
- **Phone Numbers** - International format: `+1234567890`
- **Timestamps** - ISO 8601 format: `2024-01-15T10:30:00Z`
- **URLs** - Must be HTTPS for media files
- **Status** - Enum values: `sent`, `delivered`, `read`, `failed`

### Phone Number Format

All phone numbers must be in international E.164 format:

```
+1234567890  ✅ Correct
1234567890   ❌ Missing country code
+1-234-567-890  ❌ Contains formatting
```

## API Endpoints Overview

### Authentication & Users
- `POST /auth/login` - User authentication
- `GET /auth/me` - Get current user info
- `POST /auth/refresh` - Refresh access token

### Instances
- `POST /instances/create` - Create WhatsApp instance
- `GET /instances` - List instances
- `GET /instances/{id}` - Get instance details
- `PUT /instances/{id}` - Update instance
- `DELETE /instances/{id}` - Delete instance
- `GET /instances/{id}/status` - Check instance status

### Messaging
- `POST /messages/send` - Send single message
- `POST /messages/send-bulk` - Send bulk messages
- `GET /messages` - List messages
- `GET /messages/{id}` - Get message details

### Templates
- `POST /templates/create` - Create message template
- `GET /templates` - List templates
- `GET /templates/{id}` - Get template details
- `PUT /templates/{id}` - Update template
- `DELETE /templates/{id}` - Delete template

### Contacts
- `POST /contacts` - Create contact
- `GET /contacts` - List contacts
- `GET /contacts/{id}` - Get contact details
- `PUT /contacts/{id}` - Update contact
- `DELETE /contacts/{id}` - Delete contact

### Webhooks
- `POST /webhooks/endpoints` - Create webhook endpoint
- `GET /webhooks/endpoints` - List webhook endpoints
- `PUT /webhooks/endpoints/{id}` - Update webhook endpoint
- `DELETE /webhooks/endpoints/{id}` - Delete webhook endpoint

### Analytics
- `GET /analytics/messages` - Message analytics
- `GET /analytics/instances` - Instance analytics
- `GET /analytics/templates` - Template performance

## API Integration

The MegaSend API is designed for easy integration with any programming language that supports HTTP requests. Use the code examples throughout this documentation as templates for your implementation.

### Integration Examples

Each endpoint in our documentation includes ready-to-use code examples in:
- **cURL** - Quick testing from command line
- **JavaScript/Node.js** - Web and server applications
- **Python** - Backend services and scripts
- **PHP** - WordPress and traditional web apps

## API Versioning

The API does not use URL path versioning. All endpoints are accessed directly:

```
https://api.megasend.co.il/messages/send
https://api.megasend.co.il/instances
https://api.megasend.co.il/templates
```

We maintain backward compatibility and provide advance notice before any breaking changes.

## Testing Your Integration

### Development Recommendations

1. **Start with a test WhatsApp number** - Use your own phone number for initial testing
2. **Monitor webhook responses** - Set up webhook endpoints to track message delivery
3. **Check rate limit headers** - Monitor `X-RateLimit-Remaining` in responses
4. **Use instance status endpoint** - Verify your instance is connected before sending

### Verifying Your Setup

```bash
# Test authentication
curl -X GET "https://api.megasend.co.il/auth/me" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN"

# Check instance status
curl -X GET "https://api.megasend.co.il/instances" \
  -H "X-MEGASEND-AUTH: YOUR_ACCESS_TOKEN"
```

## Support

### Documentation
- [Getting Started](/quickstart)
- [Authentication Guide](/authentication)
- [Webhook Setup](/webhooks/setup)

### Help & Support
- **Email**: [team@weblix.co.il](mailto:team@weblix.co.il)
- **Dashboard**: [app.megasend.co.il](https://app.megasend.co.il)

## OpenAPI Specification

Download the OpenAPI 3.0 specification for use with API tools:

- [OpenAPI Specification](/openapi.json)

You can import this specification into:
- [Postman](https://postman.com) - API testing and collections
- [Insomnia](https://insomnia.rest) - REST client
- [OpenAPI Generator](https://openapi-generator.tech) - Generate client libraries

## Next Steps

1. [Get started with authentication](/authentication)
2. [Send your first message](/messages/send)
3. [Set up webhooks](/webhooks/setup)
